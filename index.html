<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poovaasam - Premium Florist</title>
    
    <!-- PWA Essentials -->
    <meta name="theme-color" content="#121212">
    <meta name="description" content="Premium floral arrangements with same-day delivery">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå∏</text></svg>">
    
    <!-- iOS Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Poovaasam">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå∏</text></svg>">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ===== RESET & VARIABLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
       
        :root {
            --primary-black: #121212;
            --secondary-black: #1e1e1e;
            --light-gray: #f5f5f5;
            --medium-gray: #757575;
            --dark-gray: #424242;
            --white: #ffffff;
            --accent: #8b0000;
            --accent-light: #c53030;
            --border-radius: 12px;
            --transition: all 0.3s ease;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
       
        body {
            background-color: var(--light-gray);
            color: var(--primary-black);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* ===== PWA BANNERS ===== */
        .pwa-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: white;
            padding: 15px 20px;
            display: none;
            z-index: 10000;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.2);
        }
        
        .pwa-banner.show {
            display: flex;
            animation: slideUp 0.3s ease;
        }
        
        .pwa-banner.offline {
            top: 0;
            bottom: auto;
            background: #dc3545;
            animation: slideDown 0.3s ease;
            justify-content: center;
            text-align: center;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }
        
        .pwa-banner-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .pwa-banner-actions {
            display: flex;
            gap: 10px;
        }
        
        /* ===== LOADING ===== */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s;
        }
        
        .loading.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--light-gray);
            border-top: 4px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ===== HEADER ===== */
        header {
            background: var(--white);
            padding: 18px 5%;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
       
        .logo {
            font-size: 26px;
            font-weight: 700;
            color: var(--primary-black);
            display: flex;
            align-items: center;
            gap: 12px;
        }
       
        .logo i {
            color: var(--accent);
            font-size: 28px;
        }
        
        .install-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: var(--transition);
        }
        
        .install-btn:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
        }
       
        /* ===== NAVIGATION ===== */
        nav {
            display: flex;
            align-items: center;
            gap: 28px;
        }
       
        nav a {
            text-decoration: none;
            color: var(--dark-gray);
            font-weight: 500;
            position: relative;
            padding: 6px 0;
            transition: var(--transition);
        }
       
        nav a:hover {
            color: var(--accent);
        }
       
        nav a.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--accent);
            border-radius: 3px;
        }
       
        /* ===== CART ===== */
        .cart-icon {
            position: relative;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: var(--transition);
        }
        
        .cart-icon:hover {
            background: var(--light-gray);
        }
       
        .cart-count {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--accent);
            color: var(--white);
            font-size: 11px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
       
        /* ===== HERO ===== */
        .hero {
            background: linear-gradient(rgba(18, 18, 18, 0.85), rgba(18, 18, 18, 0.9)),
                        url('https://images.unsplash.com/photo-1464207687429-7505649dae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: var(--white);
            text-align: center;
            padding: 100px 20px;
            margin-bottom: 40px;
        }
       
        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            font-weight: 700;
            line-height: 1.2;
        }
       
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
            color: rgba(255, 255, 255, 0.85);
        }
       
        /* ===== BUTTONS ===== */
        .btn {
            background: var(--accent);
            color: var(--white);
            padding: 14px 32px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
        }
       
        .btn:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(139, 0, 0, 0.2);
        }
       
        .btn-outline {
            background: transparent;
            border: 2px solid var(--accent);
            color: var(--accent);
        }
       
        .btn-outline:hover {
            background: var(--accent);
            color: var(--white);
        }
        
        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
        }
       
        /* ===== PRODUCTS ===== */
        .section {
            padding: 60px 5%;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }
       
        .section-title {
            text-align: center;
            margin-bottom: 50px;
            color: var(--primary-black);
            font-size: 2.2rem;
            position: relative;
            padding-bottom: 15px;
        }
       
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background-color: var(--accent);
            border-radius: 2px;
        }
       
        /* ===== PRODUCT GRID ===== */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }
       
        .product-card {
            background: var(--white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
       
        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
       
        .product-img {
            height: 220px;
            overflow: hidden;
            background-color: var(--light-gray);
            position: relative;
        }
       
        .product-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }
       
        .product-card:hover .product-img img {
            transform: scale(1.05);
        }
        
        .product-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
       
        .product-info {
            padding: 24px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
       
        .product-info h3 {
            margin-bottom: 10px;
            color: var(--primary-black);
            font-size: 1.3rem;
        }
       
        .product-description {
            color: var(--medium-gray);
            font-size: 0.95rem;
            margin-bottom: 15px;
            flex-grow: 1;
        }
       
        .price {
            color: var(--accent);
            font-weight: 700;
            font-size: 1.4rem;
            margin: 15px 0;
        }
       
        .product-actions {
            display: flex;
            gap: 10px;
            margin-top: auto;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .quantity-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .quantity-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .quantity {
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }
       
        /* ===== CART MODAL ===== */
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: flex-end;
        }
       
        .cart-content {
            background: var(--white);
            width: 100%;
            max-width: 420px;
            height: 100%;
            padding: 30px;
            overflow-y: auto;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }
       
        .cart-modal.active .cart-content {
            transform: translateX(0);
        }
       
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-gray);
        }
       
        .cart-items {
            flex-grow: 1;
            margin-bottom: 20px;
            min-height: 200px;
        }
       
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .cart-item-details {
            flex-grow: 1;
        }
       
        .cart-item-details h4 {
            margin-bottom: 5px;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
        }
       
        .cart-item-price {
            color: var(--accent);
            font-weight: 600;
            font-size: 1.1rem;
        }
       
        .remove-item {
            background: none;
            border: none;
            color: var(--medium-gray);
            cursor: pointer;
            font-size: 1rem;
            padding: 5px;
            transition: var(--transition);
        }
        
        .remove-item:hover {
            color: #dc3545;
        }
       
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-weight: 700;
            font-size: 1.3rem;
            margin: 20px 0;
            padding-top: 20px;
            border-top: 2px solid var(--light-gray);
        }
       
        .close-cart {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-gray);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }
        
        .close-cart:hover {
            background: var(--light-gray);
        }
        
        .empty-cart {
            text-align: center;
            padding: 60px 20px;
            color: var(--medium-gray);
        }
        
        .empty-cart i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #ddd;
        }
       
        /* ===== FOOTER ===== */
        footer {
            background: var(--primary-black);
            color: var(--white);
            padding: 60px 5% 30px;
            margin-top: auto;
        }
       
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
       
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
       
        .footer-column h3 {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: var(--white);
        }
       
        .footer-column p, .footer-column a {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
            display: block;
            text-decoration: none;
            transition: var(--transition);
        }
       
        .footer-column a:hover {
            color: var(--white);
            padding-left: 5px;
        }
       
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
       
        .social-icons a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: var(--white);
            font-size: 1.1rem;
            transition: var(--transition);
        }
       
        .social-icons a:hover {
            background: var(--accent);
            transform: translateY(-3px);
        }
       
        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid var(--dark-gray);
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }
        
        .pwa-status {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
            font-size: 0.8rem;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-online {
            color: #28a745;
        }
        
        .status-offline {
            color: #dc3545;
        }
       
        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 15px;
                padding: 15px 20px;
            }
           
            nav {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
                gap: 20px;
                margin-top: 10px;
            }
            
            .install-btn {
                margin-top: 10px;
            }
           
            .hero h1 {
                font-size: 2rem;
            }
           
            .hero p {
                font-size: 1rem;
            }
           
            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }
           
            .product-actions {
                flex-direction: column;
            }
           
            .cart-content {
                max-width: 100%;
                padding: 20px;
            }
           
            .pwa-banner {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
                text-align: center;
            }
           
            .pwa-banner-actions {
                justify-content: center;
            }
            
            .section {
                padding: 40px 20px;
            }
        }
       
        @media (max-width: 480px) {
            .hero {
                padding: 80px 20px;
            }
           
            .product-grid {
                grid-template-columns: 1fr;
            }
           
            .footer-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }
           
            .pwa-banner-actions .btn {
                flex: 1;
                min-width: 120px;
            }
        }
        
        /* ===== UTILITY ===== */
        .text-center { text-align: center; }
        .mt-20 { margin-top: 20px; }
        .mb-20 { margin-bottom: 20px; }
        .mt-40 { margin-top: 40px; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loadingScreen">
        <div class="spinner"></div>
    </div>

    <!-- PWA Banners -->
    <div class="pwa-banner" id="installBanner">
        <div class="pwa-banner-content">
            <i class="fas fa-download fa-lg"></i>
            <div>
                <strong>Install Poovaasam App</strong>
                <p>Get quick access & work offline</p>
            </div>
        </div>
        <div class="pwa-banner-actions">
            <button class="btn btn-outline btn-small" id="dismissInstall">
                Later
            </button>
            <button class="btn btn-small" id="installApp">
                Install Now
            </button>
        </div>
    </div>

    <div class="pwa-banner offline" id="offlineBanner">
        <div class="pwa-banner-content">
            <i class="fas fa-wifi-slash"></i>
            <span>You're offline. Cart saved locally.</span>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="logo">
            <i class="fas fa-spa"></i>
            <span>Poovaasam</span>
        </div>
        <nav>
            <a href="#home" class="active">Home</a>
            <a href="#products">Collections</a>
            <a href="#about">About</a>
            <a href="#contact">Contact</a>
            <a href="#" class="cart-icon" id="cartIcon">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count" id="cartCount">0</span>
            </a>
            <button class="install-btn hidden" id="headerInstallBtn">
                <i class="fas fa-download"></i> Install App
            </button>
        </nav>
    </header>

    <!-- Hero -->
    <section class="hero" id="home">
        <h1>Elegant Floral Expressions</h1>
        <p>Where every petal tells a story | Premium flowers with same-day delivery</p>
        <button class="btn" onclick="scrollToProducts()">
            <i class="fas fa-leaf"></i> Explore Collections
        </button>
    </section>

    <!-- Products -->
    <section class="section" id="products">
        <h2 class="section-title">Signature Collections</h2>
        <div class="product-grid" id="productGrid">
            <!-- Products loaded by JS -->
        </div>
    </section>

    <!-- About -->
    <section class="section" id="about">
        <h2 class="section-title">About Poovaasam</h2>
        <div class="text-center" style="max-width: 800px; margin: 0 auto;">
            <p style="font-size: 1.1rem; color: var(--dark-gray);">
                Poovaasam, meaning 'flower' in Tamil, represents the essence of natural beauty and elegance.
                Since 2023, we've been crafting exquisite floral arrangements that blend traditional
                craftsmanship with contemporary design. Our collections bring sophistication
                and timeless beauty to every occasion.
            </p>
            <div class="features" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 40px;">
                <div class="feature">
                    <i class="fas fa-truck" style="font-size: 2rem; color: var(--accent); margin-bottom: 10px;"></i>
                    <h3>Same-Day Delivery</h3>
                    <p>Fresh flowers delivered within hours</p>
                </div>
                <div class="feature">
                    <i class="fas fa-award" style="font-size: 2rem; color: var(--accent); margin-bottom: 10px;"></i>
                    <h3>Premium Quality</h3>
                    <p>Hand-selected from the finest gardens</p>
                </div>
                <div class="feature">
                    <i class="fas fa-recycle" style="font-size: 2rem; color: var(--accent); margin-bottom: 10px;"></i>
                    <h3>Sustainable</h3>
                    <p>Eco-friendly packaging & sourcing</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Cart Modal -->
    <div class="cart-modal" id="cartModal">
        <div class="cart-content">
            <div class="cart-header">
                <h2 style="margin: 0;">Your Shopping Bag</h2>
                <button class="close-cart" id="closeCart">&times;</button>
            </div>
            <div class="cart-items" id="cartItems">
                <div class="empty-cart">
                    <i class="fas fa-shopping-bag"></i>
                    <h3>Your bag is empty</h3>
                    <p>Add some beautiful flowers to get started</p>
                </div>
            </div>
            <div class="cart-total hidden">
                <span>Total:</span>
                <span id="cartTotal">‚Çπ0</span>
            </div>
            <button class="btn hidden" id="checkoutBtn" style="width: 100%;">
                <i class="fas fa-lock"></i> Secure Checkout
            </button>
            <button class="btn btn-outline mt-20 hidden" id="continueShopping">
                Continue Shopping
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer id="contact">
        <div class="footer-content">
            <div class="footer-grid">
                <div class="footer-column">
                    <h3>Poovaasam</h3>
                    <p>Redefining floral elegance with sophisticated arrangements since 2023.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-pinterest"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <a href="#home">Home</a>
                    <a href="#products">Collections</a>
                    <a href="#about">About Us</a>
                    <a href="#contact">Contact</a>
                    <a href="#" onclick="openCart()">View Cart</a>
                </div>
                <div class="footer-column">
                    <h3>Contact Info</h3>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Petal Street, Chennai</p>
                    <p><i class="fas fa-phone"></i> +91 98765 43210</p>
                    <p><i class="fas fa-envelope"></i> hello@poovaasam.com</p>
                    <p><i class="fas fa-clock"></i> Mon-Sat: 9AM - 8PM</p>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 Poovaasam. All rights reserved. | Crafted with <i class="fas fa-heart" style="color: var(--accent);"></i> in India</p>
                <div class="pwa-status" id="pwaStatus">
                    <span class="status-item"><i class="fas fa-wifi" id="onlineStatus"></i> <span id="networkStatus">Online</span></span>
                    <span class="status-item"><i class="fas fa-mobile-alt"></i> PWA Ready</span>
                    <span class="status-item"><i class="fas fa-shopping-cart"></i> Cart Saved</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // ============================================
        // PWA CONFIGURATION
        // ============================================
        
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('‚úÖ Service Worker registered');
                        updateStatus('PWA Ready', true);
                    })
                    .catch(error => {
                        console.log('‚ùå Service Worker failed:', error);
                        updateStatus('PWA Not Active', false);
                    });
            });
        }

        // Manifest creation (if not exists)
        function createManifest() {
            const manifest = {
                name: 'Poovaasam Florist',
                short_name: 'Poovaasam',
                description: 'Premium floral arrangements with same-day delivery',
                start_url: '/',
                display: 'standalone',
                background_color: '#121212',
                theme_color: '#8b0000',
                icons: [
                    {
                        src: 'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå∏</text></svg>',
                        sizes: 'any',
                        type: 'image/svg+xml',
                        purpose: 'any maskable'
                    }
                ]
            };

            // Create link element for manifest
            const link = document.createElement('link');
            link.rel = 'manifest';
            link.href = 'data:application/manifest+json,' + encodeURIComponent(JSON.stringify(manifest));
            document.head.appendChild(link);
        }

        // Call manifest creation
        createManifest();

        // ============================================
        // PRODUCT DATA
        // ============================================
        const products = [
            {
                id: 1,
                name: "Classic Rose Bouquet",
                price: 2499,
                description: "A timeless arrangement of deep red roses, perfect for romantic occasions.",
                image: "https://images.unsplash.com/photo-1582794543139-8ac9cb0f7b11?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                badge: "Best Seller"
            },
            {
                id: 2,
                name: "Sunflower Collection",
                price: 1999,
                description: "Bright sunflowers that bring joy and warmth to any space.",
                image: "https://images.unsplash.com/photo-1519378058457-4c29a0a2efac?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                badge: "Popular"
            },
            {
                id: 3,
                name: "White Orchid Elegance",
                price: 2999,
                description: "Exotic white orchids that bring luxury and refinement.",
                image: "https://images.unsplash.com/photo-1464207687429-7505649dae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                badge: "Premium"
            },
            {
                id: 4,
                name: "Lily Serenity",
                price: 2299,
                description: "Peaceful white lilies for moments of tranquility.",
                image: "https://images.unsplash.com/photo-1518621736915-f3b1c41bfd00?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                badge: "New"
            },
            {
                id: 5,
                name: "Tulip Spring Mix",
                price: 1899,
                description: "Colorful tulips celebrating the freshness of spring.",
                image: "https://images.unsplash.com/photo-1526047932273-341f2a7631f9?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                badge: "Seasonal"
            },
            {
                id: 6,
                name: "Carnation Classic",
                price: 1799,
                description: "Long-lasting carnations in a beautiful arrangement.",
                image: "https://images.unsplash.com/photo-1559561737-685c596d9b5c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                badge: "Value"
            }
        ];

        // ============================================
        // CART SYSTEM
        // ============================================
        let cart = JSON.parse(localStorage.getItem('poovaasam_cart')) || [];
        const cartCount = document.getElementById('cartCount');
        const cartModal = document.getElementById('cartModal');
        const cartItems = document.getElementById('cartItems');
        const cartTotal = document.getElementById('cartTotal');
        const checkoutBtn = document.getElementById('checkoutBtn');
        const continueBtn = document.getElementById('continueShopping');
        const totalDisplay = document.querySelector('.cart-total');

        // Format price
        function formatPrice(price) {
            return '‚Çπ' + price.toLocaleString('en-IN');
        }

        // Display products
        function displayProducts() {
            const productGrid = document.getElementById('productGrid');
            productGrid.innerHTML = '';
           
            products.forEach(product => {
                const inCart = cart.find(item => item.id === product.id);
                const quantity = inCart ? inCart.quantity : 0;
                
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-img">
                        <img src="${product.image}" alt="${product.name}" loading="lazy">
                        ${product.badge ? `<span class="product-badge">${product.badge}</span>` : ''}
                    </div>
                    <div class="product-info">
                        <h3>${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <p class="price">${formatPrice(product.price)}</p>
                        <div class="product-actions">
                            ${quantity > 0 ? `
                                <div class="quantity-control">
                                    <button class="quantity-btn" onclick="updateQuantity(${product.id}, -1)">-</button>
                                    <span class="quantity">${quantity}</span>
                                    <button class="quantity-btn" onclick="updateQuantity(${product.id}, 1)">+</button>
                                </div>
                            ` : ''}
                            <button class="btn ${quantity > 0 ? 'btn-outline' : ''}" onclick="${quantity > 0 ? `updateQuantity(${product.id}, -${quantity})` : `addToCart(${product.id})`}">
                                <i class="fas ${quantity > 0 ? 'fa-trash' : 'fa-plus'}"></i>
                                ${quantity > 0 ? 'Remove' : 'Add to Cart'}
                            </button>
                            <button class="btn btn-outline" onclick="viewDetails(${product.id})">
                                <i class="fas fa-eye"></i> Details
                            </button>
                        </div>
                    </div>
                `;
                productGrid.appendChild(productCard);
            });
        }

        // Add to cart
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({...product, quantity: 1});
            }
            
            updateCart();
            showToast(`${product.name} added to cart`);
        }

        // Update quantity
        function updateQuantity(productId, change) {
            const itemIndex = cart.findIndex(item => item.id === productId);
            
            if (itemIndex > -1) {
                cart[itemIndex].quantity += change;
                
                if (cart[itemIndex].quantity <= 0) {
                    cart.splice(itemIndex, 1);
                    showToast('Item removed from cart');
                } else {
                    showToast(`Quantity updated`);
                }
            } else if (change > 0) {
                addToCart(productId);
                return;
            }
            
            updateCart();
        }

        // Remove from cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCart();
            showToast('Item removed from cart');
        }

        // Update cart UI
        function updateCart() {
            // Save to localStorage
            localStorage.setItem('poovaasam_cart', JSON.stringify(cart));
            
            // Update count
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            cartCount.style.display = totalItems > 0 ? 'flex' : 'none';
            
            // Update modal
            updateCartModal();
            
            // Update product display
            displayProducts();
            
            // Update status
            updateStatus('Cart Saved', true);
        }

        // Update cart modal
        function updateCartModal() {
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="empty-cart">
                        <i class="fas fa-shopping-bag"></i>
                        <h3>Your bag is empty</h3>
                        <p>Add some beautiful flowers to get started</p>
                    </div>
                `;
                totalDisplay.classList.add('hidden');
                checkoutBtn.classList.add('hidden');
                continueBtn.classList.add('hidden');
                return;
            }
            
            let total = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-details">
                        <h4>${item.name}</h4>
                        <p class="cart-item-price">${formatPrice(item.price)}</p>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                            <span>${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                        </div>
                    </div>
                    <button class="remove-item" onclick="removeFromCart(${item.id})">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                cartItems.appendChild(cartItem);
            });
            
            cartTotal.textContent = formatPrice(total);
            totalDisplay.classList.remove('hidden');
            checkoutBtn.classList.remove('hidden');
            continueBtn.classList.remove('hidden');
        }

        // ============================================
        // PWA INSTALLATION
        // ============================================
        let deferredPrompt;
        const installBanner = document.getElementById('installBanner');
        const headerInstallBtn = document.getElementById('headerInstallBtn');
        const installAppBtn = document.getElementById('installApp');
        const dismissInstallBtn = document.getElementById('dismissInstall');

        // Before install prompt
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install buttons
            headerInstallBtn.classList.remove('hidden');
            
            // Show banner after delay
            setTimeout(() => {
                if (!localStorage.getItem('installBannerDismissed')) {
                    installBanner.classList.add('show');
                }
            }, 3000);
        });

        // Install button click
        installAppBtn.addEventListener('click', async () => {
            if (!deferredPrompt) return;
            
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            
            if (outcome === 'accepted') {
                console.log('‚úÖ User installed the app');
                showToast('App installed successfully!');
                installBanner.classList.remove('show');
                headerInstallBtn.classList.add('hidden');
            }
            
            deferredPrompt = null;
        });

        // Header install button
        headerInstallBtn.addEventListener('click', () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
            } else {
                showToast('Install option not available in this browser');
            }
        });

        // Dismiss banner
        dismissInstallBtn.addEventListener('click', () => {
            installBanner.classList.remove('show');
            localStorage.setItem('installBannerDismissed', 'true');
            showToast('You can install from the menu anytime');
        });

        // App installed event
        window.addEventListener('appinstalled', () => {
            console.log('‚úÖ PWA installed successfully');
            deferredPrompt = null;
        });

        // ============================================
        // OFFLINE DETECTION
        // ============================================
        const offlineBanner = document.getElementById('offlineBanner');
        const onlineStatus = document.getElementById('onlineStatus');
        const networkStatus = document.getElementById('networkStatus');

        function updateNetworkStatus() {
            const isOnline = navigator.onLine;
            
            if (isOnline) {
                offlineBanner.classList.remove('show');
                onlineStatus.className = 'fas fa-wifi status-online';
                networkStatus.textContent = 'Online';
                networkStatus.className = 'status-online';
            } else {
                offlineBanner.classList.add('show');
                onlineStatus.className = 'fas fa-wifi-slash status-offline';
                networkStatus.textContent = 'Offline';
                networkStatus.className = 'status-offline';
                showToast('Working offline - cart saved locally');
            }
        }

        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        function showToast(message) {
            // Remove existing toast
            const existing = document.querySelector('.toast');
            if (existing) existing.remove();
            
            // Create toast
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%) translateY(100px);
                background: var(--accent);
                color: white;
                padding: 12px 24px;
                border-radius: 50px;
                box-shadow: var(--shadow);
                z-index: 10000;
                transition: transform 0.3s ease;
                font-weight: 500;
                white-space: nowrap;
            `;
            
            document.body.appendChild(toast);
            
            // Animate in
            setTimeout(() => {
                toast.style.transform = 'translateX(-50%) translateY(0)';
            }, 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.style.transform = 'translateX(-50%) translateY(100px)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function updateStatus(message, success) {
            // In a real app, you'd update a status indicator
            console.log(`üì± ${success ? '‚úÖ' : '‚ùå'} ${message}`);
        }

        function viewDetails(productId) {
            const product = products.find(p => p.id === productId);
            showToast(`Viewing ${product.name}`);
            // In real app: open detail modal
        }

        function scrollToProducts() {
            document.getElementById('products').scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }

        // ============================================
        // CART MODAL FUNCTIONS
        // ============================================
        function openCart() {
            cartModal.style.display = 'flex';
            setTimeout(() => {
                cartModal.classList.add('active');
            }, 10);
            updateCartModal();
        }

        function closeCart() {
            cartModal.classList.remove('active');
            setTimeout(() => {
                cartModal.style.display = 'none';
            }, 300);
        }

        // Event listeners
        document.getElementById('cartIcon').addEventListener('click', (e) => {
            e.preventDefault();
            openCart();
        });

        document.getElementById('closeCart').addEventListener('click', closeCart);

        document.getElementById('continueShopping').addEventListener('click', closeCart);

        checkoutBtn.addEventListener('click', () => {
            if (cart.length === 0) return;
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalAmount = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            showToast(`Processing order of ${totalItems} items (${formatPrice(totalAmount)})`);
            closeCart();
            
            // In real app: redirect to checkout
        });

        // Close modal on outside click
        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) closeCart();
        });

        // ============================================
        // INITIALIZATION
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            // Hide loading screen
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
            }, 800);
            
            // Display products
            displayProducts();
            updateCart();
            
            // Setup network detection
            updateNetworkStatus();
            window.addEventListener('online', updateNetworkStatus);
            window.addEventListener('offline', updateNetworkStatus);
            
            // Smooth scrolling for navigation
            document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    if (this.getAttribute('href') === '#') return;
                    
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        // Update active nav
                        document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
                        this.classList.add('active');
                        
                        // Scroll to section
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            // Save cart before page closes
            window.addEventListener('beforeunload', () => {
                localStorage.setItem('poovaasam_cart', JSON.stringify(cart));
            });
            
            // iOS specific instructions
            if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.navigator.standalone) {
                showToast('Tap Share ‚Üí Add to Home Screen to install');
            }
        });
    </script>

    <script>
        // ============================================
        // SERVICE WORKER (Embedded)
        // ============================================
        
        // Create service worker file if it doesn't exist
        if ('serviceWorker' in navigator) {
            const swContent = `
// Poovaasam Service Worker
const CACHE_NAME = 'poovaasam-v1.2';
const OFFLINE_URL = '/offline.html';

// Install event
self.addEventListener('install', event => {
    event.waitUntil(
        caches.open(CACHE_NAME).then(cache => {
            console.log('[SW] Caching app shell');
            return cache.addAll([
                '/',
                '/index.html',
                '/manifest.json',
                'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css'
            ]);
        })
    );
    self.skipWaiting();
});

// Activate event
self.addEventListener('activate', event => {
    event.waitUntil(
        caches.keys().then(cacheNames => {
            return Promise.all(
                cacheNames.map(cacheName => {
                    if (cacheName !== CACHE_NAME) {
                        console.log('[SW] Deleting old cache:', cacheName);
                        return caches.delete(cacheName);
                    }
                })
            );
        })
    );
    self.clients.claim();
});

// Fetch event
self.addEventListener('fetch', event => {
    // Skip non-GET requests
    if (event.request.method !== 'GET') return;
    
    // Handle API requests
    if (event.request.url.includes('/api/')) {
        event.respondWith(
            fetch(event.request).catch(() => {
                return new Response(JSON.stringify({ offline: true }), {
                    headers: { 'Content-Type': 'application/json' }
                });
            })
        );
        return;
    }
    
    // For HTML requests
    if (event.request.headers.get('accept').includes('text/html')) {
        event.respondWith(
            fetch(event.request)
                .then(response => {
                    // Cache the response
                    const responseClone = response.clone();
                    caches.open(CACHE_NAME).then(cache => {
                        cache.put(event.request, responseClone);
                    });
                    return response;
                })
                .catch(() => {
                    return caches.match(event.request).then(cachedResponse => {
                        return cachedResponse || caches.match('/');
                    });
                })
        );
        return;
    }
    
    // For other resources
    event.respondWith(
        caches.match(event.request)
            .then(cachedResponse => {
                if (cachedResponse) {
                    // Update cache in background
                    fetch(event.request).then(response => {
                        caches.open(CACHE_NAME).then(cache => {
                            cache.put(event.request, response);
                        });
                    });
                    return cachedResponse;
                }
                
                return fetch(event.request).catch(() => {
                    // Return placeholder for images
                    if (event.request.destination === 'image') {
                        return new Response(
                            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect width="100" height="100" fill="#f5f5f5"/><text x="50" y="50" text-anchor="middle" dy=".3em" fill="#999" font-size="10">Image</text></svg>',
                            { headers: { 'Content-Type': 'image/svg+xml' } }
                        );
                    }
                });
            })
    );
});

// Background sync
self.addEventListener('sync', event => {
    if (event.tag === 'sync-cart') {
        event.waitUntil(syncCart());
    }
});

async function syncCart() {
    // Get cart from IndexedDB or cache
    const clients = await self.clients.matchAll();
    clients.forEach(client => {
        client.postMessage({ type: 'SYNC_CART' });
    });
}

// Push notifications
self.addEventListener('push', event => {
    const data = event.data ? event.data.json() : {};
    const options = {
        body: data.body || 'New update from Poovaasam',
        icon: 'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå∏</text></svg>',
        badge: 'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå∏</text></svg>',
        data: { url: '/' }
    };
    
    event.waitUntil(self.registration.showNotification('Poovaasam', options));
});

self.addEventListener('notificationclick', event => {
    event.notification.close();
    event.waitUntil(
        clients.openWindow(event.notification.data.url || '/')
    );
});
            `;
            
            // Create and register service worker
            const blob = new Blob([swContent], { type: 'application/javascript' });
            const swURL = URL.createObjectURL(blob);
            
            navigator.serviceWorker.register(swURL)
                .then(registration => {
                    console.log('‚úÖ Embedded Service Worker registered');
                })
                .catch(error => {
                    console.log('‚ùå Embedded Service Worker failed:', error);
                });
        }
    </script>
</body>
</html>